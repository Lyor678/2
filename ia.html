<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FlixAI — Explorez les IA du futur</title>

  <style>
    :root{
      /* Valeurs par défaut (thème 0) */
      --bg1: #060618;
      --bg2: #0a0a2a;
      --accent: #7f5af0;
      --accent2: #2cb67d;
      --card-accent: rgba(127,90,240,0.12);
      --text: #e8e8f8;
      --glass: rgba(255,255,255,0.04);
      --radius: 14px;
      --transition-fast: 180ms;
      font-family: "Inter", "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      color:var(--text);
      background: radial-gradient(circle at 10% 10%, rgba(127,90,240,0.06), transparent 10%),
                  radial-gradient(circle at 90% 90%, rgba(44,182,125,0.05), transparent 10%),
                  linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 100%);
      transition: background 450ms ease, color 350ms ease;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    header{
      position:fixed; top:0; left:0; right:0;
      height:64px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
      padding:0 20px;
      z-index:60;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      backdrop-filter: blur(8px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.45);
    }

    /* menu-button (3 traits) */
    .menu-btn{
      position:absolute;
      left:18px;
      width:36px; height:28px;
      background:transparent;
      border:0; padding:0; cursor:pointer;
      display:flex; flex-direction:column; justify-content:space-between;
      z-index:70;
    }
    .menu-btn span{
      display:block; height:3px; width:100%;
      border-radius:3px;
      background:var(--accent);
      transition: transform var(--transition-fast) ease, opacity var(--transition-fast) ease;
    }
    .menu-btn.active span:nth-child(1){ transform: rotate(45deg) translateY(9px); }
    .menu-btn.active span:nth-child(2){ opacity:0; }
    .menu-btn.active span:nth-child(3){ transform: rotate(-45deg) translateY(-9px); }

    header h1{
      margin:0;
      font-size:20px;
      letter-spacing:0.6px;
      color:var(--accent);
      text-shadow: 0 6px 26px rgba(127,90,240,0.12);
    }

    /* overlay quand sidebar ouvert */
    .overlay{
      position:fixed; inset:0;
      background:rgba(0,0,0,0.35);
      opacity:0; visibility:hidden;
      transition:opacity 220ms ease;
      z-index:50;
      backdrop-filter: blur(2px);
    }
    .overlay.active{ opacity:1; visibility:visible; }

    /* sidebar glass */
    .sidebar{
      position:fixed; top:0; left:-320px;
      width:300px; height:100vh;
      padding:78px 16px 32px 16px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      box-shadow: 6px 0 30px rgba(0,0,0,0.5);
      backdrop-filter: blur(18px) saturate(120%);
      border-right: 1px solid rgba(255,255,255,0.03);
      transition: left 320ms cubic-bezier(.2,.9,.2,1);
      z-index:65;
      overflow:auto;
    }
    .sidebar.open{ left:0; }
    .sidebar h2{
      color:var(--accent);
      margin:6px 6px 12px;
      font-size:14px;
      letter-spacing:0.6px;
      border-bottom:1px dashed rgba(255,255,255,0.03);
      padding-bottom:8px;
    }
    .sidebar ul{ list-style:none; margin:0; padding:0 6px 14px 6px; }
    .sidebar li{
      padding:9px 12px;
      margin:6px 0;
      border-radius:8px;
      color:var(--text);
      font-size:13px;
      cursor:pointer;
      transition: background 160ms ease, transform 160ms ease;
    }
    .sidebar li:hover{
      background: linear-gradient(90deg, rgba(127,90,240,0.06), rgba(44,182,125,0.03));
      transform: translateX(6px);
    }

    /* themes grid inside sidebar */
    .theme-grid{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:10px;
      padding:6px;
      margin-top:8px;
      margin-bottom:24px;
    }
    .theme-card{
      display:flex; gap:6px; align-items:center;
      padding:8px; border-radius:8px; cursor:pointer;
      transition: transform 160ms ease, box-shadow 160ms ease;
      background: rgba(255,255,255,0.015);
      border:1px solid rgba(255,255,255,0.02);
    }
    .theme-card:hover{ transform: translateY(-4px); box-shadow:0 8px 26px rgba(0,0,0,0.35); }

    .swatches{ display:flex; gap:6px; align-items:center; }
    .sw { width:28px; height:28px; border-radius:6px; box-shadow: inset 0 -2px 6px rgba(0,0,0,0.2); border:1px solid rgba(255,255,255,0.02); }

    .theme-label{ font-size:12px; color:var(--text); margin-left:auto; opacity:0.9; }

    /* hero minimal */
    .hero{
      height:72vh;
      display:flex; align-items:center; justify-content:center; text-align:center;
      padding:0 20px;
      margin-top:64px;
    }
    .hero h2{ font-size:32px; margin:0 0 8px; color:var(--text); letter-spacing:0.2px; }
    .hero p{ margin:0; color:rgba(255,255,255,0.75); max-width:680px; }

    main{ padding:28px 20px 80px; max-width:1320px; margin:0 auto; }

    /* grille cartes */
    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fill,minmax(260px,1fr));
      gap:22px;
      margin-top:26px;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      overflow:hidden;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      border: 1px solid rgba(255,255,255,0.03);
      transition: transform 220ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms ease, border-color 220ms ease;
      display:flex; flex-direction:column;
    }
    .card:hover{ transform: translateY(-10px); box-shadow: 0 18px 40px rgba(2,6,23,0.7); }

    .imgwrap{ position:relative; height:150px; overflow:hidden; }
    .imgwrap img{
      width:100%; height:100%; object-fit:cover; display:block;
      transform: scale(1.02);
      transition: transform 420ms ease, filter 320ms ease;
    }
    .card:hover .imgwrap img{ transform: scale(1.06); }

    /* Overlay color tint that will change with theme */
    .img-tint{
      position:absolute; inset:0;
      pointer-events:none;
      mix-blend-mode: color;
      transition: background 320ms ease, opacity 220ms ease;
      opacity:0.85;
    }
    /* Slight frosted bar */
    .card-header{
      padding:12px 14px;
      display:flex; flex-direction:column; gap:6px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    }
    .title{ font-size:15px; font-weight:600; color:var(--text); margin:0; }
    .meta{ font-size:12px; color: rgba(255,255,255,0.7); }

    .card-body{ padding:10px 14px; font-size:13px; color: rgba(255,255,255,0.85); flex:1; }
    .card-footer{
      padding:10px 14px; text-align:center; font-weight:600; text-decoration:none; cursor:pointer;
      background: var(--card-accent);
      color: var(--bg2);
      border-top: 1px solid rgba(255,255,255,0.02);
      transition: background 220ms ease, color 220ms ease;
    }
    .card-footer:hover{ transform: translateY(-2px); box-shadow: 0 8px 18px rgba(0,0,0,0.45); }

    footer{ text-align:center; padding:44px 10px; color:rgba(255,255,255,0.6); font-size:13px; }
    @media (max-width:700px){
      .sidebar{ width:86vw; left:-86vw; }
      .sidebar.open{ left:0; }
    }
  </style>
</head>
<body>
  <div class="overlay" id="overlay"></div>

  <header>
    <button class="menu-btn" id="menuBtn" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
    <h1>FlixAI</h1>
  </header>

  <!-- SIDEBAR -->
  <nav class="sidebar" id="sidebar" aria-hidden="true">
    <h2>Catégories</h2>
    <ul id="categoryList" aria-label="Liste des catégories"></ul>

    <h2>Thèmes</h2>
    <div class="theme-grid" id="themeGrid" aria-label="Choix des thèmes"></div>
  </nav>

  <!-- HERO -->
  <section class="hero" role="region" aria-label="Présentation">
    <div>
      <h2>Découvrez les IA du futur</h2>
      <p>Plateforme minimaliste et professionnelle — choisissez un thème pour harmoniser le site et les cartes.</p>
    </div>
  </section>

  <main>
    <div id="grid" class="grid" aria-live="polite"></div>
  </main>

  <footer>FlixAI — © 2025</footer>

  <script>
    /*************************************************************************
     * Données: categories (50) + palettes 14 x 3 couleurs
     *************************************************************************/
    const categories = [
      "Business","Productivity","Project Management","Task Automation","Business Plan","Startup Idea",
      "Email Writing","Copywriting","Social Media","Market Analysis","Ad Campaign","SEO","Image Generation",
      "Logo Design","Web Mockup","Photo Editing","Art Concept","Video Editing","Talking Avatar","Dubbing",
      "Text-to-Video","Video Upscale","Voice Generation","Voice Cloning","Audio Mixing","Audio Transcription",
      "Podcast Creation","Article Writing","Scriptwriting","Text Summarization","Text Correction","Creative Writing",
      "Code Assistance","Automated Testing","Website Creation","Documentation","Cybersecurity","Dynamic Pricing",
      "Sales Forecasting","Inventory Management","Customer Support","Product Recommendation","Course Creation",
      "Personal Tutor","Quiz & Test","Student Performance","Accounting","Financial Forecasting","Fraud Detection",
      "Automated Trading","Investment Management"
    ];

    // 14 palettes professionnelles & minimalistes (3 couleurs chacune: bgDark, bgLight, accent)
    const palettes = [
      ["#050519","#0f1724","#7f5af0"], // violet pro
      ["#0b0f1a","#122131","#38bdf8"], // bleu pro
      ["#0b0b0b","#1a1a1a","#9ca3ff"], // gris / indigo
      ["#071018","#102033","#00c2a8"], // teal pro
      ["#0f0c29","#2b1055","#ff7eb3"], // violet foncé + rose
      ["#08121a","#0f2a3a","#00a7ff"], // deep ocean
      ["#091018","#142033","#8be38b"], // vert doux
      ["#0f1114","#24292e","#f6c343"], // graphite + or
      ["#0a0810","#1b1024","#ff7a59"], // sombre + orange
      ["#08101a","#15324a","#6ee7b7"], // sombre bleu + menthe
      ["#0b0b12","#2a1f3a","#c084fc"], // sombre + lilas
      ["#0a0a0a","#1e1e1e","#fef08a"], // sombre + jaune doux
      ["#020024","#004e92","#00d4ff"], // bleu électrique
      ["#0e1114","#22262b","#ffd166"]  // anthracite + warm amber
    ];

    /*************************************************************************
     * Sidebar, menu et thèmes
     *************************************************************************/
    const menuBtn = document.getElementById('menuBtn');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const categoryList = document.getElementById('categoryList');
    const themeGrid = document.getElementById('themeGrid');

    menuBtn.addEventListener('click', () => {
      const open = sidebar.classList.toggle('open');
      overlay.classList.toggle('active', open);
      menuBtn.classList.toggle('active', open);
      sidebar.setAttribute('aria-hidden', !open);
    });
    overlay.addEventListener('click', () => {
      sidebar.classList.remove('open');
      overlay.classList.remove('active');
      menuBtn.classList.remove('active');
      sidebar.setAttribute('aria-hidden', true);
    });

    // Remplir catégories
    categories.forEach(cat => {
      const li = document.createElement('li');
      li.textContent = cat;
      li.addEventListener('click', () => {
        // Placeholder action: tu peux remplacer par un filtre réel si tu veux
        // Ici on ferme le menu pour garder UX propre
        sidebar.classList.remove('open');
        overlay.classList.remove('active');
        menuBtn.classList.remove('active');
      });
      categoryList.appendChild(li);
    });

    // Construire la grille de thèmes (affiche 3 swatches)
    palettes.forEach((pal, idx) => {
      const card = document.createElement('div');
      card.className = 'theme-card';
      const swatches = document.createElement('div');
      swatches.className = 'swatches';
      pal.forEach(c => {
        const s = document.createElement('div');
        s.className = 'sw';
        s.style.background = c;
        swatches.appendChild(s);
      });
      const label = document.createElement('div');
      label.className = 'theme-label';
      label.textContent = `Thème ${idx+1}`;
      card.appendChild(swatches);
      card.appendChild(label);
      card.addEventListener('click', () => applyTheme(idx));
      themeGrid.appendChild(card);
    });

    /*************************************************************************
     * Chargement et rendu des cartes (tout d'un coup)
     * - On construit dans un DocumentFragment pour performance
     * - On applique un overlay de couleur sur les images qui suivra le thème
     *************************************************************************/
    const grid = document.getElementById('grid');
    let allData = [];

    async function loadDataAllAtOnce(){
      try{
        const res = await fetch('data.json');
        if(!res.ok) throw new Error('Impossible de charger data.json');
        const d = await res.json();
        allData = Array.isArray(d) ? d : [d];

        // build DOM fragment (performant)
        const frag = document.createDocumentFragment();
        allData.forEach((item, i) => {
          const card = document.createElement('article');
          card.className = 'card';
          card.dataset.idx = i;

          // Image wrapper with tint overlay
          const imgwrap = document.createElement('div');
          imgwrap.className = 'imgwrap';

          const img = document.createElement('img');
          img.src = item.image || `https://images.unsplash.com/photo-1677442136019-21780ecad995?auto=format&fit=crop&w=1000&q=80`;
          img.alt = item.handle || 'FlixAI image';
          // NOTE: user wanted "tout d'un coup" -> no lazy loading attribute

          const tint = document.createElement('div');
          tint.className = 'img-tint';
          // tint background will be set by applyTheme

          imgwrap.appendChild(img);
          imgwrap.appendChild(tint);

          const header = document.createElement('div');
          header.className = 'card-header';
          header.innerHTML = `<div class="title">${escapeHtml(item.handle || 'Sans nom')}</div>
                              <div class="meta">${escapeHtml(item.id || '')}</div>`;

          const body = document.createElement('div');
          body.className = 'card-body';
          body.textContent = item.description || '(Pas de description)';

          const footer = document.createElement('a');
          footer.className = 'card-footer';
          footer.textContent = 'Visiter le site';
          footer.href = item.website || '#';
          footer.target = '_blank';
          footer.rel = 'noopener noreferrer';

          card.appendChild(imgwrap);
          card.appendChild(header);
          card.appendChild(body);
          card.appendChild(footer);

          frag.appendChild(card);
        });

        grid.appendChild(frag);

        // Appliquer thème initial (palette 0)
        applyTheme(0);
      } catch(err){
        grid.innerHTML = `<div style="padding:24px;color:#f87171;font-weight:700">Erreur: ${escapeHtml(err.message||err)}</div>`;
      }
    }

    // escape simple
    function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

    /*************************************************************************
     * applyTheme: applique palette sur : root variables, cartes, tints
     *************************************************************************/
    function applyTheme(index){
      const pal = palettes[index];
      const bgDark = pal[0];
      const bgLight = pal[1];
      const accent = pal[2];

      // calcul de couleurs complémentaires pour accent2 & card accent
      // générer une couleur d'accent secondaire légèrement plus claire
      const accent2 = lightenHex(accent, 18);
      const cardAccent = hexToRgba(accent, 0.12);

      // appliquer variables CSS globales
      document.documentElement.style.setProperty('--bg1', bgDark);
      document.documentElement.style.setProperty('--bg2', bgLight);
      document.documentElement.style.setProperty('--accent', accent);
      document.documentElement.style.setProperty('--accent2', accent2);
      document.documentElement.style.setProperty('--card-accent', cardAccent);
      document.documentElement.style.setProperty('--text', '#f5f7fb');

      // MAJ des tints & cards
      const cards = document.querySelectorAll('.card');
      const tintGradient = `linear-gradient(135deg, ${hexToRgba(accent,0.45)}, ${hexToRgba(accent2,0.28)})`;
      cards.forEach((c, i) => {
        // bordure / ombre adaptative
        c.style.borderColor = hexToRgba(accent, 0.06);
        c.style.boxShadow = `0 12px 40px ${hexToRgba(accent,0.12)}`;

        // img tint
        const tint = c.querySelector('.img-tint');
        if(tint){
          // varier légèrement l'angle/opacity pour éviter répétition visuelle
          const angle = 120 + (i % 6) * 10;
          tint.style.background = `linear-gradient(${angle}deg, ${hexToRgba(accent,0.45)} 0%, ${hexToRgba(accent2,0.28)} 100%)`;
          tint.style.opacity = 0.88;
        }

        // footer color contrast
        const footer = c.querySelector('.card-footer');
        if(footer) {
          footer.style.background = hexToRgba(accent, 0.12);
          footer.style.color = bgLight;
        }

        // optionally adjust image filter to better match theme (subtile)
        const img = c.querySelector('img');
        if(img){
          // small contrast/brightness adjustments to harmonize images
          img.style.filter = 'contrast(0.98) saturate(0.95)';
        }
      });

      // MAJ autres éléments (header title glow)
      document.querySelector('header h1').style.color = accent;
      document.querySelector('header h1').style.textShadow = `0 8px 34px ${hexToRgba(accent,0.14)}`;
    }

    /*************************************************************************
     * Utils: hex helpers
     *************************************************************************/
    function hexToRgb(hex){
      hex = hex.replace('#','');
      if(hex.length===3) hex = hex.split('').map(c=>c+c).join('');
      const bigint = parseInt(hex,16);
      return [ (bigint>>16)&255, (bigint>>8)&255, bigint&255 ];
    }
    function hexToRgba(hex, alpha=1){
      const [r,g,b] = hexToRgb(hex);
      return `rgba(${r}, ${g}, ${b}, ${alpha})`;
    }
    function lightenHex(hex, percent){
      const [r,g,b] = hexToRgb(hex);
      const amt = Math.round(255 * (percent/100));
      const nr = Math.min(255, r + amt);
      const ng = Math.min(255, g + amt);
      const nb = Math.min(255, b + amt);
      return `#${((1<<24) + (nr<<16) + (ng<<8) + nb).toString(16).slice(1)}`;
    }

    /*************************************************************************
     * Démarrage
     *************************************************************************/
    loadDataAllAtOnce();

    // Expose applyTheme pour debug console si besoin
    window.applyTheme = applyTheme;
  </script>
</body>
</html>
