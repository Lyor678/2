<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FlixAI</title>
  <style>
    :root {font-family: Inter, system-ui, sans-serif;}
    body {
      margin:0;
      padding:0;
      background:linear-gradient(180deg,#0f172a,#1e293b);
      color:#f1f5f9;
      min-height:100vh;
      overflow-x:hidden;
    }

    header {
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
      padding:16px 24px;
      background:#0f172a;
      box-shadow:0 4px 10px rgba(0,0,0,0.6);
      position:relative;
      z-index:10;
    }

    h1 {
      margin:0;
      font-size:32px;
      font-weight:700;
      color:#38bdf8;
      letter-spacing:1px;
    }

    /* Icône hamburger */
    .menu-btn {
      position:absolute;
      left:20px;
      background:none;
      border:none;
      cursor:pointer;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      width:26px;
      height:18px;
      padding:0;
    }
    .menu-btn span {
      display:block;
      height:3px;
      width:100%;
      background:#38bdf8;
      border-radius:3px;
      transition:all .3s ease;
    }
    .menu-btn.active span:nth-child(1){transform:rotate(45deg) translateY(8px);}
    .menu-btn.active span:nth-child(2){opacity:0;}
    .menu-btn.active span:nth-child(3){transform:rotate(-45deg) translateY(-8px);}

    /* Menu latéral */
    .sidebar {
      position:fixed;
      top:0;
      left:-280px;
      width:260px;
      height:100%;
      background:#0f172a;
      box-shadow:4px 0 15px rgba(0,0,0,0.5);
      transition:left .4s ease;
      padding-top:70px;
      z-index:9;
      overflow-y:auto;
    }
    .sidebar.open {left:0;}
    .sidebar h2 {
      font-size:18px;
      color:#38bdf8;
      margin:10px 24px;
      border-bottom:1px solid #334155;
      padding-bottom:6px;
    }
    .sidebar ul {list-style:none;padding:0;margin:0;}
    .sidebar li {
      padding:10px 24px;
      cursor:pointer;
      color:#f1f5f9;
      border-left:4px solid transparent;
      transition:all .3s ease;
    }
    .sidebar li:hover {
      background:#1e293b;
      border-left:4px solid #38bdf8;
      color:#38bdf8;
    }

    .grid {
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
      gap:24px;
      margin:30px auto;
      max-width:1400px;
      padding:0 16px;
    }

    .card {
      background:#1e293b;
      border-radius:16px;
      box-shadow:0 6px 18px rgba(0,0,0,0.6);
      overflow:hidden;
      cursor:pointer;
      transition:transform .3s ease, box-shadow .3s ease;
      display:flex;
      flex-direction:column;
    }
    .card:hover {
      transform:translateY(-8px) scale(1.03);
      box-shadow:0 12px 28px rgba(0,0,0,0.8);
    }

    .card-header {
      padding:20px;
      border-bottom:1px solid #334155;
      background:linear-gradient(135deg,#0f172a,#1e293b);
    }
    .card-title {font-size:20px;font-weight:600;color:#f8fafc;margin:0;}
    .card-meta {font-size:13px;color:#94a3b8;margin-top:6px;}

    .card-body {
      padding:18px;
      font-size:14px;
      color:#e2e8f0;
      display:none;
      animation:fadeIn .4s ease;
    }

    .card-tags {
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      padding:12px 18px;
    }
    .tag {
      background:#334155;
      color:#f1f5f9;
      font-size:12px;
      padding:4px 10px;
      border-radius:12px;
      cursor:pointer;
      transition:all .3s ease;
    }
    .tag:hover {background:#38bdf8;color:#0f172a;}

    .card-footer {
      padding:14px 18px;
      background:#0f172a;
      font-size:14px;
      color:#38bdf8;
      text-decoration:none;
      transition:color .3s;
    }
    .card-footer:hover {color:#0ea5e9;}

    footer {
      margin:40px 0;
      color:#94a3b8;
      font-size:13px;
      text-align:center;
    }

    @keyframes fadeIn {from {opacity:0;transform:translateY(10px);} to {opacity:1;transform:translateY(0);}}
  </style>
</head>
<body>
  <header>
    <button class="menu-btn" id="menuBtn">
      <span></span><span></span><span></span>
    </button>
    <h1>FlixAI</h1>
  </header>

  <nav class="sidebar" id="sidebar">
    <h2>Catégories</h2>
    <ul id="categoryList"></ul>
  </nav>

  <main>
    <div id="grid" class="grid"></div>
  </main>

  <footer>
    <div>FlixAI — Explorez toutes les IA par catégories ✨</div>
  </footer>

  <script>
    const grid = document.getElementById('grid');
    const sidebar = document.getElementById('sidebar');
    const categoryList = document.getElementById('categoryList');
    const menuBtn = document.getElementById('menuBtn');

    const categories = [
      "Business","Productivity","Project Management","Task Automation","Business Plan","Startup Idea",
      "Email Writing","Copywriting","Social Media","Market Analysis","Ad Campaign","SEO","Image Generation",
      "Logo Design","Web Mockup","Photo Editing","Art Concept","Video Editing","Talking Avatar","Dubbing",
      "Text-to-Video","Video Upscale","Voice Generation","Voice Cloning","Audio Mixing","Audio Transcription",
      "Podcast Creation","Article Writing","Scriptwriting","Text Summarization","Text Correction","Creative Writing",
      "Code Assistance","Automated Testing","Website Creation","Documentation","Cybersecurity","Dynamic Pricing",
      "Sales Forecasting","Inventory Management","Customer Support","Product Recommendation","Course Creation",
      "Personal Tutor","Quiz & Test","Student Performance","Accounting","Financial Forecasting","Fraud Detection",
      "Automated Trading","Investment Management"
    ];

    let allData = [];
    let activeCategory = 'Tous';

    // Toggle menu
    menuBtn.addEventListener('click', () => {
      sidebar.classList.toggle('open');
      menuBtn.classList.toggle('active');
    });

    // Chargement des IA
    window.addEventListener('DOMContentLoaded', async () => {
      try {
        const res = await fetch('data.json');
        if (!res.ok) throw new Error('Impossible de charger data.json');
        const data = await res.json();
        allData = Array.isArray(data) ? data : [data];
        renderCategories();
        showCards(allData);
      } catch (err) {
        showError(err);
      }
    });

    function renderCategories(){
      categoryList.innerHTML = '';
      const allLi = document.createElement('li');
      allLi.textContent = 'Toutes les catégories';
      allLi.addEventListener('click', () => {
        activeCategory = 'Tous';
        filterAndRender();
        sidebar.classList.remove('open');
        menuBtn.classList.remove('active');
      });
      categoryList.appendChild(allLi);

      categories.forEach(cat => {
        if (allData.some(item => (item.description||'').toLowerCase().includes(cat.toLowerCase()))) {
          const li = document.createElement('li');
          li.textContent = cat;
          li.addEventListener('click', () => {
            activeCategory = cat;
            filterAndRender();
            sidebar.classList.remove('open');
            menuBtn.classList.remove('active');
          });
          categoryList.appendChild(li);
        }
      });
    }

    function filterAndRender(){
      let filtered = [...allData];
      if (activeCategory !== 'Tous'){
        filtered = filtered.filter(item =>
          (item.description||'').toLowerCase().includes(activeCategory.toLowerCase())
        );
      }
      showCards(filtered);
    }

    function showError(err){
      grid.innerHTML = `<div style="color:#f87171;font-weight:700">Erreur: ${escapeHtml(err.message || err)}</div>`;
    }

    function showCards(data){
      grid.innerHTML = '';
      data.forEach(item => {
        const card = document.createElement('div');
        card.className = 'card';

        const header = document.createElement('div');
        header.className = 'card-header';
        header.innerHTML = `<h3 class="card-title">${escapeHtml(item.handle || 'Sans nom')}</h3>
                            <div class="card-meta">ID: ${escapeHtml(item.id || '?')}</div>`;

        const body = document.createElement('div');
        body.className = 'card-body';
        body.textContent = item.description || '(pas de description)';

        const tagsDiv = document.createElement('div');
        tagsDiv.className = 'card-tags';
        categories.forEach(cat => {
          if ((item.description||'').toLowerCase().includes(cat.toLowerCase())) {
            const tag = document.createElement('span');
            tag.className = 'tag';
            tag.textContent = cat;
            tag.addEventListener('click', e => {
              e.stopPropagation();
              activeCategory = cat;
              filterAndRender();
            });
            tagsDiv.appendChild(tag);
          }
        });

        const footer = document.createElement('a');
        footer.className = 'card-footer';
        footer.href = item.website || '#';
        footer.target = '_blank';
        footer.rel = 'noopener noreferrer';
        footer.textContent = item.website || 'Aucun site';

        card.appendChild(header);
        card.appendChild(body);
        card.appendChild(tagsDiv);
        card.appendChild(footer);

        card.addEventListener('click', () => {
          const isVisible = body.style.display === 'block';
          body.style.display = isVisible ? 'none' : 'block';
        });

        grid.appendChild(card);
      });
    }

    function escapeHtml(s){
      return String(s)
        .replace(/&/g,'&amp;')
        .replace(/</g,'&lt;')
        .replace(/>/g,'&gt;')
        .replace(/"/g,'&quot;');
    }
  </script>
</body>
</html>
