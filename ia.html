<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FlixAI ‚Äî Les Meilleures IA</title>
  <style>
    :root {
      --bg: #f4f4f4;
      --text: #1a1a1a;
      --accent: #2f2f2f;
      --card-bg: rgba(255,255,255,0.25);
      --glass-border: rgba(255,255,255,0.3);
      --shadow: rgba(0,0,0,0.1);
    }

    [data-theme="dark"] {
      --bg: #0c0c0f;
      --text: #e5e5e5;
      --accent: #d1d1d1;
      --card-bg: rgba(25,25,28,0.55);
      --glass-border: rgba(255,255,255,0.08);
      --shadow: rgba(0,0,0,0.5);
    }

    * { box-sizing: border-box; }
    body { margin:0; font-family:"Poppins",system-ui,sans-serif; background:var(--bg); color:var(--text); overflow-x:hidden; min-height:100vh; transition: background 0.5s,color 0.5s; }

    header {
      position: fixed; top:0; left:0; width:100%; padding:16px 20px;
      background: var(--card-bg); backdrop-filter: blur(20px); border-bottom:1px solid var(--glass-border);
      box-shadow: 0 4px 20px var(--shadow); display:flex; align-items:center; justify-content:center; z-index:10;
    }

    h1 { margin:0; font-size:22px; font-weight:600; color:var(--accent); letter-spacing:0.5px; }

    .menu-btn { position:absolute; left:20px; background:none; border:none; cursor:pointer; display:flex; flex-direction:column; justify-content:space-between; width:26px; height:18px; z-index:20; }
    .menu-btn span { display:block; height:3px; width:100%; background:var(--text); border-radius:3px; transition: all .3s ease; }
    .menu-btn.active span:nth-child(1){transform:rotate(45deg) translateY(7px);}
    .menu-btn.active span:nth-child(2){opacity:0;}
    .menu-btn.active span:nth-child(3){transform:rotate(-45deg) translateY(-7px);}

    .theme-toggle { position:absolute; right:20px; background:none; border:none; font-size:20px; cursor:pointer; color:var(--text); transition: transform 0.3s ease; }
    .theme-toggle:hover { transform: scale(1.1); }

    .sidebar {
      position: fixed; top:0; left:-280px; width:240px; height:100%; background: var(--card-bg); backdrop-filter:blur(18px); border-right:1px solid var(--glass-border);
      box-shadow:4px 0 20px var(--shadow); transition:left 0.4s ease; z-index:15; padding-top:80px; overflow-y:auto;
    }
    .sidebar.open { left:0; }
    .sidebar h2 { font-size:15px; color:var(--accent); margin:10px 20px; border-bottom:1px solid var(--glass-border); padding-bottom:6px; }
    .sidebar ul { list-style:none; padding:0; margin:0; }
    .sidebar li { padding:10px 20px; cursor:pointer; color:var(--text); border-left:3px solid transparent; transition: all 0.3s ease; }
    .sidebar li:hover { background: rgba(255,255,255,0.1); border-left:3px solid var(--accent); }

    .overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.3); backdrop-filter:blur(4px); opacity:0; visibility:hidden; transition:opacity .4s ease; z-index:5; }
    .overlay.active { opacity:1; visibility:visible; }

    .search-container { display:flex; justify-content:center; padding:24px; margin-top:90px; opacity:0; transform:translateX(-100%); animation: slideIn 1.2s ease forwards; animation-delay:0.4s; }
    @keyframes slideIn { to { opacity:1; transform:translateX(0); } }
    .search-bar { width:80%; max-width:600px; padding:12px 18px; border-radius:14px; border:1px solid var(--glass-border); background:var(--card-bg); backdrop-filter:blur(18px); color:var(--text); font-size:15px; outline:none; box-shadow:0 4px 12px var(--shadow); transition: box-shadow 0.3s ease, background 0.3s ease; }
    .search-bar:focus { box-shadow:0 6px 18px rgba(0,0,0,0.3); }

    main { margin-top:40px; padding:0 24px; }
    .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:24px; max-width:1300px; margin:40px auto; }

    .card { position:relative; background:var(--card-bg); border:1px solid var(--glass-border); border-radius:18px; box-shadow:0 8px 24px var(--shadow); backdrop-filter:blur(18px); overflow:hidden; transition: transform .3s ease, box-shadow .3s ease; display:flex; flex-direction:column; }
    .card:hover { transform:translateY(-6px); box-shadow:0 12px 28px rgba(0,0,0,0.3); }
    .card::after { content:""; position:absolute; bottom:-6px; left:50%; transform:translateX(-50%) scaleX(0); width:60%; height:4px; background:rgba(200,200,200,0.6); border-radius:2px; transition: transform 0.3s ease, opacity 0.3s ease; opacity:0; }
    .card:hover::after { transform:translateX(-50%) scaleX(1); opacity:1; }
    .card img { width:100%; height:160px; object-fit:cover; border-bottom:1px solid var(--glass-border); }
    .card-header { padding:16px; }
    .card-title { font-size:18px; font-weight:600; color:var(--accent); }
    .card-meta { font-size:12px; color:#888; margin-top:4px; }
    .card-body { padding:0 16px 16px; font-size:14px; color:var(--text); flex-grow:1; }
    .card-footer { background:rgba(0,0,0,0.05); text-align:center; padding:12px; text-decoration:none; color:var(--accent); font-weight:500; transition:background 0.3s ease; }
    .card-footer:hover { background:rgba(0,0,0,0.1); }

    footer { text-align:center; color:#777; font-size:13px; padding:30px 0; }

    /* === PAGE DE CHARGEMENT === */
    #loader-page {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    /* From Uiverse.io by alexruix */
    .loader {
      width: 112px;
      height: 112px;
      position: relative;
    }

    .box1,
    .box2,
    .box3 {
      border: 16px solid #f5f5f5;
      box-sizing: border-box;
      position: absolute;
      display: block;
    }

    .box1 {
      width: 112px;
      height: 48px;
      margin-top: 64px;
      margin-left: 0px;
      animation: abox1 4s 1s forwards ease-in-out infinite;
    }

    .box2 {
      width: 48px;
      height: 48px;
      margin-top: 0px;
      margin-left: 0px;
      animation: abox2 4s 1s forwards ease-in-out infinite;
    }

    .box3 {
      width: 48px;
      height: 48px;
      margin-top: 0px;
      margin-left: 64px;
      animation: abox3 4s 1s forwards ease-in-out infinite;
    }

    @keyframes abox1 {
      0% { width: 112px; height: 48px; margin-top: 64px; margin-left: 0px; }
      12.5%, 62.5% { width: 48px; height: 48px; margin-top: 64px; margin-left: 0px; }
      75% { width: 48px; height: 112px; margin-top: 0px; margin-left: 0px; }
      100% { width: 48px; height: 48px; margin-top: 0px; margin-left: 0px; }
    }

    @keyframes abox2 {
      0%, 37.5% { width: 48px; height: 48px; margin-top: 0px; margin-left: 0px; }
      50% { width: 112px; height: 48px; margin-top: 0px; margin-left: 0px; }
      62.5%, 100% { width: 48px; height: 48px; margin-top: 0px; margin-left: 64px; }
    }

    @keyframes abox3 {
      0%, 12.5% { width: 48px; height: 48px; margin-top: 0px; margin-left: 64px; }
      25% { width: 48px; height: 112px; margin-top: 0px; margin-left: 64px; }
      37.5%, 87.5% { width: 48px; height: 48px; margin-top: 64px; margin-left: 64px; }
      100% { width: 112px; height: 48px; margin-top: 64px; margin-left: 0px; }
    }
  </style>
</head>
<body data-theme="dark">

  <!-- === PAGE DE CHARGEMENT === -->
  <div id="loader-page">
    <div class="loader">
      <span class="box1"></span>
      <span class="box2"></span>
      <span class="box3"></span>
    </div>
  </div>

  <div class="overlay" id="overlay"></div>

  <header>
    <button class="menu-btn" id="menuBtn"><span></span><span></span><span></span></button>
    <h1>FlixAI</h1>
    <button class="theme-toggle" id="themeToggle">‚òÄÔ∏è</button>
  </header>

  <nav class="sidebar" id="sidebar">
    <h2>Cat√©gories</h2>
    <ul id="categoryList"></ul>
  </nav>

  <div class="search-container">
    <input id="searchBar" type="text" class="search-bar" placeholder=" Rechercher une IA">
  </div>

  <main>
    <div id="grid" class="grid"></div>
  </main>

  <footer>FlixAI ‚Äî D√©couvrez les meilleures IA ü§ñ</footer>

  <script>
    const menuBtn = document.getElementById('menuBtn');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const grid = document.getElementById('grid');
    const categoryList = document.getElementById('categoryList');
    const themeToggle = document.getElementById('themeToggle');
    const searchBar = document.getElementById('searchBar');
    const loaderPage = document.getElementById('loader-page');

    const categories = [
      "Business","Productivity","Project Management","Task Automation","Business Plan","Startup Idea",
      "Email Writing","Copywriting","Social Media","Market Analysis","Ad Campaign","SEO","Image Generation"
    ];

    let allData = [];
    
    menuBtn.addEventListener("click", toggleMenu);
    overlay.addEventListener("click", closeMenu);
    themeToggle.addEventListener("click", () => {
      const current = document.body.getAttribute("data-theme");
      if(current==="dark"){document.body.removeAttribute("data-theme"); themeToggle.textContent="üåô";}
      else {document.body.setAttribute("data-theme","dark"); themeToggle.textContent="‚òÄÔ∏è";}
    });
    searchBar.addEventListener("input", () => { filterByKeyword(searchBar.value.trim()); });

    function toggleMenu(){ sidebar.classList.toggle("open"); overlay.classList.toggle("active"); menuBtn.classList.toggle("active"); }
    function closeMenu(){ sidebar.classList.remove("open"); overlay.classList.remove("active"); menuBtn.classList.remove("active"); }

    function renderCategories(){
      categoryList.innerHTML = "";
      const allLi = document.createElement("li");
      allLi.textContent = "Toutes les cat√©gories";
      allLi.addEventListener("click",()=>{ showCards(allData); closeMenu(); });
      categoryList.appendChild(allLi);
      categories.forEach(cat=>{
        const li=document.createElement("li");
        li.textContent=cat;
        li.addEventListener("click",()=>{ filterByKeyword(cat); closeMenu(); });
        categoryList.appendChild(li);
      });
    }

    function filterByKeyword(query){
      if(!query) return showCards(allData);
      const filtered=allData.filter(item=>(item.handle+" "+item.description).toLowerCase().includes(query.toLowerCase()));
      showCards(filtered);
    }

    function showCards(data){
      grid.innerHTML="";
      data.forEach(item=>{
        const card=document.createElement("div"); card.className="card";
        const img=document.createElement("img"); img.src=item.image||"https://ibb.co/k2RknvYG"; img.alt=item.handle;
        const header=document.createElement("div"); header.className="card-header"; header.innerHTML=`<h3 class="card-title">${item.handle}</h3><div class="card-meta">${item.id||"?"}</div>`;
        const body=document.createElement("div"); body.className="card-body"; body.textContent=item.description||"(Pas de description)";
        const footer=document.createElement("a"); footer.className="card-footer"; footer.href=item.website||"#"; footer.target="_blank"; footer.textContent="Visiter le site";
        card.appendChild(img); card.appendChild(header); card.appendChild(body); card.appendChild(footer);
        grid.appendChild(card);
      });
    }

    async function loadData(){
      try{
        const res=await fetch("data.json");
        if(!res.ok) throw new Error("Impossible de charger data.json");
        const data=await res.json();
        allData=Array.isArray(data)?data:[data];
        renderCategories();
        showCards(allData);
      } catch(err){
        grid.innerHTML=`<div style="color:#f87171;font-weight:700">Erreur: ${err.message}</div>`;
      } finally {
        loaderPage.style.display = "none"; // Dispara√Æt instantan√©ment
      }
    }

    loadData();
  </script>
</body>
</html>
