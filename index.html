<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FlixAI - Introduction</title>
<style>
  body {
    margin: 0;
    background-color: #0a0a0a;
    color: white;
    font-family: 'Poppins', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    overflow: hidden;
  }

  /* Loader Styles */
  .pl {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
  }

  .pl__dot {
    width: 10px;
    height: 10px;
    background: white;
    border-radius: 50%;
    margin: 5px;
    display: inline-block;
    animation: pl-bounce 1s infinite;
  }

  .pl__dot:nth-child(2) { animation-delay: 0.1s; }
  .pl__dot:nth-child(3) { animation-delay: 0.2s; }
  .pl__dot:nth-child(4) { animation-delay: 0.3s; }
  .pl__dot:nth-child(5) { animation-delay: 0.4s; }
  .pl__dot:nth-child(6) { animation-delay: 0.5s; }
  .pl__dot:nth-child(7) { animation-delay: 0.6s; }
  .pl__dot:nth-child(8) { animation-delay: 0.7s; }
  .pl__dot:nth-child(9) { animation-delay: 0.8s; }
  .pl__dot:nth-child(10) { animation-delay: 0.9s; }
  .pl__dot:nth-child(11) { animation-delay: 1s; }
  .pl__dot:nth-child(12) { animation-delay: 1.1s; }

  @keyframes pl-bounce {
    0%, 80%, 100% { transform: scale(0); }
    40% { transform: scale(1); }
  }

  .pl__text {
    margin-top: 15px;
    font-size: 1.2em;
  }

  /* Intro content */
  .viewer-container, .intro, #skip-btn {
    display: none;
  }

  .viewer-container {
    width: 100%;
    height: 65vh;
    opacity: 0;
    transform: translateY(-50px);
    animation: robotEntrance 2s forwards;
    animation-delay: 0.5s;
  }

  @keyframes robotEntrance {
    to { opacity: 1; transform: translateY(0); }
  }

  spline-viewer {
    width: 100%;
    height: 100%;
    display: block;
  }

  .intro {
    text-align: center;
    max-width: 700px;
    margin-top: 20px;
    font-size: 1.2em;
    animation: fadeIn 2s ease forwards;
    opacity: 0;
    animation-delay: 2.5s;
  }

  @keyframes fadeIn { to { opacity: 1; } }

  #skip-btn {
    margin-top: 25px;
    padding: 12px 28px;
    background-color: #333333;
    color: #fff;
    border: 2px solid #fff;
    border-radius: 30px;
    font-size: 1em;
    cursor: pointer;
    text-shadow: 0 0 10px #fff;
    box-shadow: 0 0 15px #fff;
    transition: 0.3s;
  }

  #skip-btn:hover { background-color: #555555; }

  /* Progression IA */
  #progress {
    margin-top: 10px;
    font-size: 0.9em;
    opacity: 0.7;
  }
</style>
</head>
<body>

<!-- Loader -->
<div class="pl" id="loader">
  <div class="pl__dot"></div>
  <div class="pl__dot"></div>
  <div class="pl__dot"></div>
  <div class="pl__dot"></div>
  <div class="pl__dot"></div>
  <div class="pl__dot"></div>
  <div class="pl__dot"></div>
  <div class="pl__dot"></div>
  <div class="pl__dot"></div>
  <div class="pl__dot"></div>
  <div class="pl__dot"></div>
  <div class="pl__dot"></div>
  <div class="pl__text">Chargement…</div>
  <div id="progress">Chargement des IA : 0%</div>
</div>

<!-- Contenu principal -->
<div class="viewer-container">
  <script type="module" src="https://unpkg.com/@splinetool/viewer@1.10.85/build/spline-viewer.js"></script>
  <spline-viewer url="https://prod.spline.design/Y4T3aRR9fxfA2bKG/scene.splinecode"></spline-viewer>
</div>

<div class="intro" id="intro-text"></div>
<button id="skip-btn">Passer l’intro</button>

<script>
const text = [
  "Bienvenue sur FlixAI.",
  "Je suis votre robot assistant virtuel et je vais vous guider à travers notre univers d’IA.",
  "FlixAI répertorie des dizaines d’outils et d’intelligences artificielles pour faciliter vos projets.",
  "Que vous cherchiez à générer du contenu, automatiser des tâches ou découvrir de nouvelles idées, vous êtes au bon endroit.",
  "Nous avons regroupé toutes les IA les plus utiles et performantes en un seul site.",
  "Chaque IA est choisie pour sa qualité et son efficacité afin que vous gagniez du temps et soyez plus productif.",
  "Préparez-vous à plonger dans le monde fascinant de l’intelligence artificielle."
];

const loader = document.getElementById("loader");
const viewer = document.querySelector(".viewer-container");
const introDiv = document.getElementById("intro-text");
const skipBtn = document.getElementById("skip-btn");
const progress = document.getElementById("progress");

// ⚙️ Étape 1 : Précharger les IA depuis data.json
async function preloadIA() {
  try {
    const response = await fetch("data.json");
    const data = await response.json();
    let loaded = 0;
    const total = data.length || 1;

    // Simulation du chargement progressif
    for (let i = 0; i < data.length; i++) {
      await new Promise(r => setTimeout(r, 50)); // petite pause
      loaded++;
      const percent = Math.min(100, Math.round((loaded / total) * 100));
      progress.textContent = `Chargement des IA : ${percent}%`;
    }

    console.log("✅ IA préchargées :", data.length);
  } catch (err) {
    console.error("Erreur lors du chargement des IA :", err);
  }
}

// Démarre le préchargement
preloadIA();

// ⚙️ Étape 2 : Animation d’intro
setTimeout(() => {
  loader.style.display = "none";
  viewer.style.display = "block";
  introDiv.style.display = "block";
  skipBtn.style.display = "block";

  let i = 0;
  function typeLine() {
    if (i < text.length) {
      introDiv.innerHTML = text[i];
      i++;
      setTimeout(typeLine, 4000);
    } else {
      introDiv.innerHTML = "Bonne expérience !";
      setTimeout(() => { window.location.href = "ia.html"; }, 2000);
    }
  }
  typeLine();
}, 4000);

// ⚡ Étape 3 : Bouton “Passer l’intro”
skipBtn.addEventListener("click", () => {
  window.location.href = "ia.html";
});
</script>

</body>
</html>
